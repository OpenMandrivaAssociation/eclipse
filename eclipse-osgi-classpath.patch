--- plugins/org.eclipse.osgi/build.xml.orig	2008-09-25 15:28:47.000000000 +1000
+++ plugins/org.eclipse.osgi/build.xml	2008-09-25 15:54:08.000000000 +1000
@@ -16,18 +16,36 @@
 	<property name="compilerArg" value=""/>
 	<property name="javacSource" value="1.3"/>
 	<property name="javacTarget" value="1.2"/>
-	<property name="bundleBootClasspath" value="osgi/exceptions.jar;osgi/xmlParserAPIs.jar;${CDC-1.0/Foundation-1.0}"/>
+	<condition property="dir_bootclasspath" value="${java.home}/../Classes">
+		<os family="mac"/>
+	</condition>
+	<property name="dir_bootclasspath" value="${java.home}/lib"/>
+	<path id="path_bootclasspath">
+		<fileset dir="${dir_bootclasspath}">
+			<include name="*.jar"/>
+		</fileset>
+	</path>
+	<property name="bootclasspath" refid="path_bootclasspath"/>
+<condition property="bundleBootClasspath" value="${J2SE-1.4}"	>
+		<isset property="J2SE-1.4"/>
+	</condition>
 <condition property="bundleJavacSource" value="1.3"	>
-		<isset property="CDC-1.0/Foundation-1.0"/>
+		<isset property="J2SE-1.4"/>
+	</condition>
+<condition property="bundleJavacTarget" value="1.2"	>
+		<isset property="J2SE-1.4"/>
 	</condition>
-<condition property="bundleJavacTarget" value="1.1"	>
-		<isset property="CDC-1.0/Foundation-1.0"/>
+<condition property="bundleBootClasspath" value="${J2SE-1.4}"	>
+		<isset property="J2SE-1.4"/>
 	</condition>
-<condition property="bundleJavacSource" value="1.5"	>
-		<isset property="J2SE-1.5"/>
+<condition property="bundleJavacSource" value="1.3"	>
+		<isset property="J2SE-1.4"/>
+	</condition>
+<condition property="bundleJavacTarget" value="1.2"	>
+		<isset property="J2SE-1.4"/>
 	</condition>
-<condition property="bundleJavacTarget" value="1.5"	>
-		<isset property="J2SE-1.5"/>
+<condition property="bundleBootClasspath" value="${OSGi/Minimum-1.1}"	>
+		<isset property="OSGi/Minimum-1.1"/>
 	</condition>
 <condition property="bundleJavacSource" value="1.3"	>
 		<isset property="OSGi/Minimum-1.1"/>
@@ -37,6 +55,7 @@
 	</condition>
 	<property name="bundleJavacSource" value="${javacSource}"/>
 	<property name="bundleJavacTarget" value="${javacTarget}"/>
+	<property name="bundleBootClasspath" value="${bootclasspath}"/>
 
 	<target name="init" depends="properties">
 <condition property="pluginTemp" value="${buildTempFolder}/plugins"		>
